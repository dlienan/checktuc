<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_32) on Thu Jul 12 14:45:39 CST 2012 -->
<TITLE>
com.acs.smartcard
</TITLE>

<META NAME="date" CONTENT="2012-07-12">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="com.acs.smartcard";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../com/acs/smartcard/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV PACKAGE&nbsp;
&nbsp;NEXT PACKAGE</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/acs/smartcard/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<H2>
Package com.acs.smartcard
</H2>
Provides classes and interfaces for communicating with ACS smart card readers on
Android 3.1 or above.
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#package_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Interface Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/Reader.OnStateChangeListener.html" title="interface in com.acs.smartcard">Reader.OnStateChangeListener</A></B></TD>
<TD>Interface definition for a callback to be invoked when the state of
 reader is changed.</TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/Features.html" title="class in com.acs.smartcard">Features</A></B></TD>
<TD>This class represents features in PC/SC 2.0 Part 10.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/PinModify.html" title="class in com.acs.smartcard">PinModify</A></B></TD>
<TD>This class represents PIN_MODIFY structure in PC/SC 2.0 Part 10.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/PinProperties.html" title="class in com.acs.smartcard">PinProperties</A></B></TD>
<TD>This class represents PIN_PROPERTIES structure in PC/SC 2.0 Part 10.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/PinVerify.html" title="class in com.acs.smartcard">PinVerify</A></B></TD>
<TD>This class represents PIN_VERIFY structure in PC/SC 2.0 Part 10.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/Reader.html" title="class in com.acs.smartcard">Reader</A></B></TD>
<TD>This class represents a smart card reader attached to the android device.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/ReadKeyOption.html" title="class in com.acs.smartcard">ReadKeyOption</A></B></TD>
<TD>This class represents READ_KEY_OPTION structure in ACR83/APG8201 reader.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/TlvProperties.html" title="class in com.acs.smartcard">TlvProperties</A></B></TD>
<TD>This class represents TLV properties in PC/SC 2.0 Part 10.</TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Exception Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/BufferOverflowException.html" title="class in com.acs.smartcard">BufferOverflowException</A></B></TD>
<TD>Thrown when a method is invoked with a buffer which is too large to handle.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/CommunicationErrorException.html" title="class in com.acs.smartcard">CommunicationErrorException</A></B></TD>
<TD>Thrown when there is an error occurred in reader communication.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/DevicePowerFailureException.html" title="class in com.acs.smartcard">DevicePowerFailureException</A></B></TD>
<TD>Thrown when there is a power failure on the reader.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/DeviceProtocolErrorException.html" title="class in com.acs.smartcard">DeviceProtocolErrorException</A></B></TD>
<TD>Thrown when there is a protocol error occurred in card communication.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/InsufficientBufferException.html" title="class in com.acs.smartcard">InsufficientBufferException</A></B></TD>
<TD>Thrown when a method is invoked with a buffer which is too small for the
 returned data.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/InternalErrorException.html" title="class in com.acs.smartcard">InternalErrorException</A></B></TD>
<TD>Thrown when there is a internal error occurred in the library.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/InvalidDeviceStateException.html" title="class in com.acs.smartcard">InvalidDeviceStateException</A></B></TD>
<TD>Thrown when the state of reader is invalid.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/ProtocolMismatchException.html" title="class in com.acs.smartcard">ProtocolMismatchException</A></B></TD>
<TD>Thrown when the requested protocols are incompatible with the protocol
 currently in use with the card.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/ReaderException.html" title="class in com.acs.smartcard">ReaderException</A></B></TD>
<TD>ReaderException is the superclass of those exceptions that can be thrown
 during normal operation of the reader.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/RemovedCardException.html" title="class in com.acs.smartcard">RemovedCardException</A></B></TD>
<TD>Thrown when a program attempts to access a card which is removed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/UnpoweredCardException.html" title="class in com.acs.smartcard">UnpoweredCardException</A></B></TD>
<TD>Thrown when a program attempts to access a card which is not powered.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/UnresponsiveCardException.html" title="class in com.acs.smartcard">UnresponsiveCardException</A></B></TD>
<TD>Thrown when a program attempts to access a card which is not responding to a
 reset.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/acs/smartcard/UnsupportedCardException.html" title="class in com.acs.smartcard">UnsupportedCardException</A></B></TD>
<TD>Thrown when a program attempts to access a card which is not supported.</TD>
</TR>
</TABLE>
&nbsp;

<P>
<A NAME="package_description"><!-- --></A><H2>
Package com.acs.smartcard Description
</H2>

<P>
Provides classes and interfaces for communicating with ACS smart card readers on
Android 3.1 or above. To create and initialize a <code>Reader</code> object, get
an instance of <code>UsbManager</code> by calling
<code>Context.getSystemService()</code>.

<pre>
UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);
Reader reader = new Reader(manager);
</pre>

<p>
If you want to detect a card in your application, you can supply a
<code>Reader.OnStateChangeListener</code> object to <code>Reader</code> object.

<pre>
reader.setOnStateChangeListener(new OnStateChangeListener() {

    &#64;Override
    public void onStateChange(int slotNum, int prevState, int currState) {

        // TODO: Add your code here
    }
});
</pre>

<h3>Opening Reader</h3>

<p>
To open a reader, you need to get a <code>UsbDevice</code> object from
<code>UsbManager</code> and request a permission to access the device or
discover a device using intent filter. For more information, please refer to
<a href="http://developer.android.com/guide/topics/usb/host.html">USB Host</a>
from Android Dev Guide.

<pre>
try {

    reader.open(device);

} catch (IllegalArgumentException e) {

    e.printStackTrace();
}
</pre>

<p>
It will throw <code>IllegalArgumentException</code> if the
<code>UsbDevice</code> object is not supported or it cannot be opened due to
communication error.

<h3>Closing Reader</h3>

<p>
Android will not close the USB device automatically if you close the
application. You cannot use the reader without unplugging it when you start the
application next time. Therefore, it is advised to close the reader before
closing the application.

<pre>
reader.close();
</pre>

<h3>Resetting Card</h3>

<p>
Before transmitting APDU command, you need to power up a card first. The ATR
string will be returned if the card is operated normally. Otherwise, it will
throw a exception to indicate the error.

<pre>
try {

    byte[] atr = reader.power(slotNum, Reader.CARD_WARM_RESET);

} catch (ReaderException e) {

    e.printStackTrace();
}
</pre>

<h3>Setting Protocol</h3>

<p>
After powering up the card, the card state is changed to Negotiable
(<code>Reader.CARD_NEGOTIABLE</code>) or Specific
(<code>Reader.CARD_SPECIFIC</code>). You cannot transmit a APDU command if the
card state is not equal to Specific. To select a protocol, invoke
<code>Reader.setProtocol()</code> method with preferred protocols.

<pre>
try {

    reader.setProtocol(slotNum, Reader.PROTOCOL_T0 | Reader.PROTOCOL_T1);

} catch (ReaderException e) {

    e.printStackTrace();
}
</pre>

<h3>Transmitting APDU</h3>

<p>
After selecting the protcol, you can transmit the APDU command using
<code>Reader.transmit()</code>.

<pre>
byte[] command = { 0x00, 0x84, 0x00, 0x00, 0x08 };
byte[] response = new byte[300];
int responseLength;

try {

    responseLength = reader.transmit(slotNum, command, command.length, response,
            response.length);

} catch (ReaderException e) {

    e.printStackTrace();
}
</pre>

<h3>Controlling Reader</h3>

<p>
You can control the reader using <code>Reader.control()</code> if the reader
supports a set of escape commands.

<pre>
// Get firmware version (ACR122)
byte[] command = { 0xFF, 0x00, 0x48, 0x00, 0x08 };

byte[] response = new byte[300];
int responseLength;

try {

    responseLength = reader.control(slotNum, Reader.IOCTL_CCID_ESCAPE, command,
            command.length, response, response.length);

} catch (ReaderException e) {

    e.printStackTrace();
}
</pre>
<P>

<P>
<DL>
<DT><B>Since:</B></DT>
  <DD>1.0</DD>
</DL>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../com/acs/smartcard/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV PACKAGE&nbsp;
&nbsp;NEXT PACKAGE</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/acs/smartcard/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
<font size=-1>Copyright &copy; 2011-2012 Advanced Card Systems Ltd. All Rights Reserved.</font>
</BODY>
</HTML>
